const searchForm = document.querySelector('.search-form');
const searchBtn = document.querySelector('#search-btn');
const cartItem = document.querySelector('.cart-items-container');
const cartBtn = document.querySelector('#cart-btn');
const navbar = document.querySelector('.navbar');
const menuBtn = document.querySelector('#menu-btn');

// Массив с объяснениями для каждого вопроса
const explanations = [
    "22 июня 1941 года Германия напала на СССР без объявления войны, что стало началом Великой Отечественной войны.",
    "Ленинград находился в блокаде 872 дня, с 8 сентября 1941 года по 27 января 1944 года.",
    "Иосиф Сталин был Верховным Главнокомандующим СССР во время войны.",
    "Сталинградская битва (1942-1943) стала переломным моментом в войне, так как после неё стратегическая инициатива перешла к СССР.",
    "Операция 'Багратион' (1944) привела к освобождению Белоруссии от немецких войск.",
    "Георгий Жуков командовал обороной Москвы в 1941 году и сыграл ключевую роль в её успешной защите.",
    "Операция 'Тайфун' была направлена на захват Москвы, но завершилась провалом для немецких войск.",
    "Т-34 был основным танком Красной Армии во время войны благодаря своей надёжности и простоте в производстве.",
    "Крымский фронт оборонял Севастополь, который был важным стратегическим пунктом на Чёрном море.",
    "Союзниками СССР были США и Великобритания, которые оказывали помощь по программе ленд-лиза.",
    "1944 год стал годом освобождения территории СССР от фашистов, так как к этому времени Красная Армия провела ряд успешных операций.",
    "Орёл был освобождён первым в ходе войны в 1943 году в ходе операции 'Кутузов'.",
    "План 'Барбаросса' был разработан Германией для нападения на СССР и предполагал быструю победу.",
    "Центральный фронт участвовал в Курской битве, которая стала крупнейшим танковым сражением в истории.",
    "Берлин был взят советскими войсками в 1945 году, что стало завершающим этапом войны в Европе.",
    "9 мая 1945 года считается Днём Победы, так как в этот день был подписан акт о капитуляции Германии.",
    "Сталинградский фронт оборонял Сталинград, где произошло одно из самых кровопролитных сражений войны.",
    "Минск был освобождён в ходе операции 'Багратион' в 1944 году.",
    "1941 год стал годом начала контрнаступления под Москвой, которое завершилось успехом для Красной Армии.",
    "1-й Белорусский фронт участвовал в битве за Берлин, завершившейся взятием столицы Германии.",
    "Ленинград был освобождён в ходе операции 'Искра' в 1943 году, что привело к прорыву блокады.",
    "1944 год стал годом освобождения Крыма, который был важным стратегическим регионом.",
    "1-й Украинский фронт участвовал в освобождении Праги, завершившемся в мае 1945 года.",
    "Сталинград был освобождён в ходе операции 'Уран', которая привела к окружению немецких войск.",
    "1943 год стал годом освобождения Киева, что стало важным этапом в освобождении Украины.",
    "1-й Белорусский фронт участвовал в освобождении Варшавы, которое произошло в январе 1945 года.",
    "Орёл был освобождён в ходе операции 'Кутузов' в 1943 году, что стало важным этапом в освобождении СССР.",
    "1944 год стал годом освобождения Одессы, которая была важным портом на Чёрном море.",
    "2-й Украинский фронт участвовал в освобождении Будапешта, завершившемся в феврале 1945 года.",
    "Харьков был освобождён в ходе операции 'Румянцев' в 1943 году, что стало важным этапом в освобождении Украины.",
    "1944 год стал годом освобождения Белоруссии, что привело к значительным потерям для немецких войск.",
    "3-й Украинский фронт участвовал в освобождении Вены, завершившемся в апреле 1945 года.",
    "Кишинёв был освобождён в ходе операции 'Ясско-Кишинёвская' в 1944 году, что привело к освобождению Молдавии.",
    "1944 год стал годом освобождения Прибалтики, что завершило освобождение территории СССР.",
    "3-й Белорусский фронт участвовал в освобождении Кенигсберга, завершившемся в апреле 1945 года.",
    "Варшава была освобождена в ходе операции 'Висло-Одерская' в январе 1945 года.",
    "1944 год стал годом освобождения Польши, что привело к значительным потерям для немецких войск.",
    "1-й Белорусский фронт участвовал в освобождении Берлина, завершившемся в мае 1945 года.",
    "Кенигсберг был освобождён в ходе операции 'Восточно-Прусская' в апреле 1945 года.",
    "1945 год стал годом освобождения Чехословакии, что завершило освобождение Восточной Европы.",
    "1-й Украинский фронт участвовал в освобождении Праги, завершившемся в мае 1945 года.",
    "Прага была освобождена в ходе операции 'Пражская' в мае 1945 года.",
    "1945 год стал годом освобождения Венгрии, что завершило освобождение Восточной Европы.",
    "2-й Украинский фронт участвовал в освобождении Будапешта, завершившемся в феврале 1945 года.",
    "Будапешт был освобождён в ходе операции 'Будапештская' в феврале 1945 года.",
    "1945 год стал годом освобождения Австрии, что завершило освобождение Центральной Европы.",
    "3-й Украинский фронт участвовал в освобождении Вены, завершившемся в апреле 1945 года.",
    "Вена была освобождена в ходе операции 'Венская' в апреле 1945 года.",
    "1945 год стал годом освобождения Германии, что завершило войну в Европе.",
    "1-й Белорусский фронт участвовал в освобождении Берлина, завершившемся в мае 1945 года."
];

menuBtn.addEventListener('click', () => {
    navbar.classList.toggle('active');

    // Меняем иконку кнопки меню (опционально)
    if (navbar.classList.contains('active')) {
        menuBtn.innerHTML = '<i class="fas fa-times"></i>'; // Иконка "крестик"
    } else {
        menuBtn.innerHTML = '<i class="fas fa-bars"></i>'; // Иконка "бургер"
    }
});

// Закрываем меню при клике вне его области
document.addEventListener('click', (e) => {
    if (!navbar.contains(e.target) && !menuBtn.contains(e.target)) {
        navbar.classList.remove('active');
        menuBtn.innerHTML = '<i class="fas fa-bars"></i>'; // Возвращаем иконку "бургер"
    }
});


function summary() {
    console.log("Функция summary() вызвана"); // Отладка

    let questions = document.querySelectorAll('.question p'); // Все вопросы
    let score = 0; // Количество верных ответов
    let rightAnswers = ["a_2", "b_1", "c_1", "d_1", "e_1", "f_1", "g_1", "h_1", "i_1", "j_1", "k_1", "l_1", "m_1", "n_1", "o_1", "p_1", "q_1", "r_1", "s_1", "t_1", "u_1", "v_1", "w_1", "x_1", "y_1", "z_1", "aa_1", "ab_1", "ac_1", "ad_1", "ae_1", "af_1", "ag_1", "ah_1", "ai_1", "aj_1", "ak_1", "al_1", "am_1", "an_1", "ao_1", "ap_1", "aq_1", "ar_1", "as_1", "at_1", "au_1", "av_1", "aw_1", "ax_1"]; // Список верных ответов



    // Проверка ответов пользователя и отображение объяснений
    questions.forEach((question, index) => {
        let chosenAnswer = document.querySelector(`input[name="вопрос${index + 1}"]:checked`);
        let explanationDiv = document.getElementById(`explanation${index + 1}`); // Контейнер для объяснения

        if (explanationDiv) {
            explanationDiv.textContent = explanations[index]; // Добавляем объяснение
            explanationDiv.style.display = 'block'; // Показываем объяснение
        }

        if (chosenAnswer) {
            if (chosenAnswer.id === rightAnswers[index]) {
                score++;
                chosenAnswer.parentElement.style.color = 'green'; // Подсветка правильного ответа пользователя
            } else {
                chosenAnswer.parentElement.style.color = 'red'; // Подсветка неправильного ответа пользователя
            }
        } else {
            question.style.color = 'red'; // Подсветка, если ответа нет
        }
    });

    // Вычисление оценки
    let grade;
    if (score >= 45) {
        grade = '5';
    } else if (score >= 35) {
        grade = '4';
    } else if (score >= 25) {
        grade = '3';
    } else {
        grade = '2';
    }

    // Отображение результата
    let resultModal = document.getElementById('resultModal');
    let resultText = document.getElementById('resultText');
    let closeModal = document.querySelector('.close');

    if (resultModal && resultText) {
        resultText.textContent = `Ваш результат: ${score} из ${questions.length}. Оценка: ${grade}`;
        resultModal.style.display = 'block';
    } else {
        console.error("Элементы модального окна не найдены!"); // Отладка
    }

    if (closeModal) {
        closeModal.onclick = function() {
            resultModal.style.display = 'none';
        };
    }

    window.onclick = function(event) {
        if (event.target === resultModal) {
            resultModal.style.display = 'none';
        }
    };
}